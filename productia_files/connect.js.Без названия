"use strict";var OK=window.OK||(window.OK={});OK.CONNECT=OK.CONNECT||{hostName:"https://connect.ok.ru",defaultStyle:"border:0;",frameId:0,uiStarted:false,insideok:false,config:{detectClientCanonical:true,maxQueryLength:400,pingWait:5},insertGroupWidget:function(t,e,n){this.insertWidget(t,"Group","st.groupId="+e,n,250,335)},insertShareWidget:function(t,e,n,i,r,s){var o="st.shareUrl="+encodeURIComponent(e);if(typeof i!=="undefined"){o+="&st.title="+encodeURIComponent(i)}if(typeof r!=="undefined"){o+="&st.description="+encodeURIComponent(r)}if(typeof s!=="undefined"){o+="&st.imageUrl="+encodeURIComponent(s)}var d=this.UTIL.detectCanonicalUrl();if(typeof d==="string"&&d.length>0){var a="&st.canonicalUrl="+encodeURIComponent(d);if((o+a).length<=this.config.maxQueryLength){o+="&st.canonicalUrl="+encodeURIComponent(d)}}this.insertWidget(t,"Share",o,n,170,30)},insertContentWidget:function(t,e,n){this.insertWidget(t,"Content","st.content="+e,n,"100%",180)},insertProfileWidget:function(t,e,n){this.insertWidget(t,"Profile","st.profileId="+e,n,250,335)},insertWidget:function(t,e,n,i,r,s){setTimeout(function(){var o=OK.CONNECT;var d=document.getElementById(t);if(d==null){return"error"}if(typeof i==="undefined"){i="{}"}var a=document.createElement("iframe");a.id="__ok"+e+o.frameId++;a.scrolling="no";a.frameBorder=0;a.allowTransparency=true;a.src=o.hostName+"/dk?st.cmd=Widget"+e+"&"+n+"&st.fid="+a.id+"&st.hoster="+encodeURIComponent(window.location)+"&st.settings="+encodeURIComponent(i)+(o.insideok?"&st.insideok=1":"");a.setAttribute("allowFullScreen","");var f=o.UTIL.parseJson(i);var l=o.defaultStyle;var c=o.UTIL.getJsonAttr(f,"width",r);l+="width:"+c+(c==="100%"?";":"px;");l+="height:"+o.UTIL.getJsonAttr(f,"height",s)+"px;";o.UTIL.applyStyle(a,l);d.appendChild(a)},this.frameId>1||this.insideok?0:this.config.pingWait)},startUI:function(){if(this.uiStarted)return;this.uiStarted=true;try{if(window.addEventListener){window.addEventListener("message",this.onUI,false)}else{window.attachEvent("onmessage",this.onUI)}top.postMessage("ok_ping","*")}catch(t){}},onUI:function(t){if(t.origin==OK.CONNECT.hostName){var e=t.data.split("$");if(e[0]=="ok_setStyle"){var n=document.getElementById(e[1]);OK.CONNECT.UTIL.applyStyle(n,e[2])}}else if("ok_pong"==t.data){OK.CONNECT.insideok=true}},UTIL:{applyStyle:function(t,e){var n=e.split(";");for(var i=0;i<n.length;i++){var r=n[i].split(":");if(r.length==2&&r[0].length>0){t.style[r[0]]=r[1]}}},parseJson:function(jsonStr){return eval("(function(){return "+jsonStr+";})()")},getJsonAttr:function(t,e,n){var i=t[e];return i!=null?i:n},detectCanonicalUrl:function(){if(OK.CONNECT.config.detectClientCanonical!==true){return void 0}if(!document||!document.getElementsByTagName){return void 0}var t=document.getElementsByTagName("link");for(var e=0;e<t.length;e++){var n=t[e];if(n&&n.rel==="canonical"&&n.href!==void 0){return n.href}}var i=document.getElementsByTagName("meta");for(var e=0;e<i.length;e++){var r=i[e];if(r&&r.name==="og:url"&&r.content!==void 0){return r.content}}return void 0}}};OK.CONNECT.startUI();
//# sourceMappingURL=connect-BzP3zNcq.js.map
